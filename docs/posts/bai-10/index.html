<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xử lý đa luồng cho Server Socket | Huỳnh Anh Khoa</title>
    <link rel="icon" href="https://anhkhoa1310.github.io/HuynhAnhKhoa_Blog/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
         
        :root {
            --primary: #4f46e5;
            --primary-light: #e0e7ff;
            --bg-body: #ffffff;
            --bg-section: #f8fafc;
            --text-main: #0f172a;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: var(--bg-body); color: var(--text-main); line-height: 1.8; }
        .container { max-width: 900px; margin: 0 auto; padding: 0 24px; }  
        a { text-decoration: none; transition: 0.3s; }

         
        .header {
            padding: 15px 0; background: rgba(255,255,255,0.85);
            backdrop-filter: blur(12px); border-bottom: 1px solid var(--border);
            position: sticky; top: 0; z-index: 1000;
        }
        .nav { display: flex; justify-content: space-between; align-items: center; max-width: 1100px; margin: 0 auto; padding: 0 24px; }
        .logo { font-size: 1.25rem; font-weight: 800; color: var(--text-main); }
        .logo span { color: var(--primary); }
        .nav-links { display: flex; align-items: center; gap: 20px; }
        .nav-link { font-size: 0.85rem; font-weight: 600; color: var(--text-muted); }
        .nav-link:hover { color: var(--primary); }
        .cv-button { color: var(--primary) !important; border: 1.5px solid var(--primary); padding: 8px 16px; border-radius: 8px; font-size: 0.85rem !important; }
        .github-btn { background: var(--text-main); color: #fff !important; padding: 10px 20px; border-radius: 10px; font-size: 0.85rem !important; }

         
        .post-page { padding: 60px 0 100px; }
        .back-nav { margin-bottom: 40px; }
        .back-link { color: var(--text-muted); font-weight: 700; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 8px; }
        .back-link:hover { color: var(--primary); transform: translateX(-5px); }

         
        .post-header { text-align: center; margin-bottom: 50px; }
        .post-category { display: inline-block; background: var(--primary-light); color: var(--primary); font-weight: 800; font-size: 0.75rem; padding: 6px 16px; border-radius: 50px; text-transform: uppercase; margin-bottom: 20px; }
        .post-title { font-size: 2.8rem; font-weight: 800; line-height: 1.2; letter-spacing: -1px; margin-bottom: 20px; color: var(--text-main); }
        .post-meta { color: var(--text-muted); font-size: 0.95rem; font-weight: 500; display: flex; justify-content: center; gap: 25px; border-top: 1px dashed var(--border); border-bottom: 1px dashed var(--border); padding: 15px 0; }

         
        .post-content { font-size: 1.15rem; color: #334155; line-height: 1.8; margin-top: 40px; }
        .post-content h2 { font-size: 1.8rem; font-weight: 800; margin: 50px 0 20px; color: var(--text-main); border-left: 5px solid var(--primary); padding-left: 15px; }
        .post-content h3 { font-size: 1.4rem; font-weight: 700; margin: 35px 0 15px; color: var(--text-main); }
        .post-content p { margin-bottom: 25px; }
        
         
        .post-content pre { 
            background: #0f172a; color: #f8fafc; padding: 25px; border-radius: 16px; 
            overflow-x: auto; margin: 40px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 1rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid #334155;
        }
        .post-content code { background: #f1f5f9; color: #ef4444; padding: 2px 8px; border-radius: 6px; font-size: 0.9em; font-weight: 600; }
        .post-content pre code { background: transparent; color: inherit; padding: 0; font-weight: 400; border: none; box-shadow: none; }

         
        .post-content img { max-width: 100%; height: auto; border-radius: 20px; margin: 40px auto; display: block; box-shadow: var(--shadow); border: 1px solid var(--border); }

         
        .post-content blockquote { padding: 25px 30px; background: var(--bg-section); border-left: 5px solid var(--primary); border-radius: 12px; font-style: italic; margin: 40px 0; color: var(--text-muted); }

         
        .footer { padding: 80px 0 40px; border-top: 1px solid var(--border); background: var(--bg-section); }
        .footer-grid { display: grid; grid-template-columns: 2fr 1.2fr 1.2fr; gap: 60px; max-width: 1100px; margin: 0 auto; padding: 0 24px; }
        .footer h3 { font-size: 1.5rem; font-weight: 800; margin-bottom: 20px; }
        .footer-links li { list-style: none; margin-bottom: 12px; font-weight: 600; color: var(--text-muted); font-size: 0.9rem; }
        .social-bar { display: flex; gap: 12px; margin-top: 25px; }
        .social-link { width: 42px; height: 42px; background: #fff; border: 1px solid var(--border); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--text-main); transition: 0.3s; }
        .social-link:hover { background: var(--primary); color: #fff; transform: translateY(-3px); }

        @media (max-width: 768px) { 
            .post-title { font-size: 2rem; } 
            .nav-links { display: none; }
            .post-wrapper { padding: 20px; }
            .container { padding: 0 15px; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="nav">
            <a href="https://anhkhoa1310.github.io/HuynhAnhKhoa_Blog/" class="logo">ALPHA<span>.DETAIL</span></a>
            <nav class="nav-links">
                <a href="https://anhkhoa1310.github.io/HuynhAnhKhoa_Blog/" class="nav-link">TRANG CHỦ</a>
                <a href="https://anhkhoa1310.github.io/HuynhAnhKhoa_Blog/posts" class="nav-link active">BÀI VIẾT</a>
                <a href="https://anhkhoa1310.github.io/HuynhAnhKhoa_Blog/about" class="nav-link">GIỚI THIỆU</a>
                <a href="https://drive.google.com/file/d/1FAx9Ptr94sf7BWjTb66I63RCZ5PErmPS/view?usp=sharing" class="nav-link cv-button" target="_blank"><i class="fas fa-file-download"></i> TẢI CV</a>
                <a href="https://github.com/anhkhoa1310" target="_blank" class="github-btn">GITHUB</a>
            </nav>
        </div>
    </header>

    <main class="post-page">
        <div class="container">
            <nav class="back-nav">
                <a href="https://anhkhoa1310.github.io/HuynhAnhKhoa_Blog/posts" class="back-link">
                    <i class="fas fa-arrow-left"></i> Quay lại danh sách
                </a>
            </nav>

            <header class="post-header">
                <span class="post-category">MULTITHREAD</span>
                <h1 class="post-title">Xử lý đa luồng cho Server Socket</h1>
                <div class="post-meta">
                    <span><i class="far fa-calendar-alt"></i> 28/12/2025</span>
                    <span><i class="far fa-clock"></i> 2 phút đọc</span>
                </div>
            </header>

            <article class="post-content">
                <p>Trong môi trường thực tế, một máy chủ không bao giờ chỉ phục vụ một người dùng duy nhất. Thách thức lớn nhất đối với lập trình viên mạng là làm thế nào để Server có thể phản hồi hàng nghìn yêu cầu cùng lúc mà không làm gián đoạn lẫn nhau.</p>
<hr>
<h2 id="1-mô-hình-xử-lý-đa-luồng-multi-threading">1. Mô hình xử lý Đa luồng (Multi-threading)</h2>
<p>Mô hình xử lý truyền thống (Sequential) chỉ cho phép một kết nối tại một thời điểm. Với kỹ thuật Multi-threading, mỗi khi một Client kết nối thành công, Server sẽ tạo ra một luồng (Thread) riêng biệt để phục vụ Client đó.</p>
<p><strong>Quy trình vận hành:</strong></p>
<ol>
<li><strong>Main Thread:</strong> Liên tục lắng nghe tại cổng (ServerSocket).</li>
<li><strong>Accept:</strong> Khi có kết nối, gọi phương thức <code>.accept()</code>.</li>
<li><strong>Spawn Thread:</strong> Khởi tạo một đối tượng thực thi luồng mới và bàn giao Socket của Client đó cho luồng con.</li>
<li><strong>Independent Work:</strong> Luồng con xử lý dữ liệu độc lập trong khi Luồng chính quay lại lắng nghe Client tiếp theo.</li>
</ol>
<hr>
<h2 id="2-mã-nguồn-thực-thi-tại-server">2. Mã nguồn thực thi tại Server</h2>
<p>Dưới đây là cấu trúc mã nguồn tiêu biểu cho một Server đa luồng trong Java:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MultiThreadedServer</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> IOException {
</span></span><span style="display:flex;"><span>        ServerSocket serverSocket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ServerSocket(1234);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Server is running on port 1234...&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {
</span></span><span style="display:flex;"><span>            Socket clientSocket <span style="color:#f92672">=</span> serverSocket.<span style="color:#a6e22e">accept</span>();
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;New client connected!&#34;</span>);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Khởi tạo luồng mới cho mỗi Client</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> ClientHandler(clientSocket).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ClientHandler</span> <span style="color:#66d9ef">extends</span> Thread {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Socket socket;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ClientHandler</span>(Socket socket) { <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">socket</span> <span style="color:#f92672">=</span> socket; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Logic xử lý dữ liệu riêng biệt cho mỗi Client ở đây</span>
</span></span><span style="display:flex;"><span>            DataInputStream in <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DataInputStream(socket.<span style="color:#a6e22e">getInputStream</span>());
</span></span><span style="display:flex;"><span>            String message <span style="color:#f92672">=</span> in.<span style="color:#a6e22e">readUTF</span>();
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Message from client: &#34;</span> <span style="color:#f92672">+</span> message);
</span></span><span style="display:flex;"><span>            socket.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (IOException e) { e.<span style="color:#a6e22e">printStackTrace</span>(); }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
            </article>

            <div style="text-align: center; margin-top: 60px; padding-top: 40px; border-top: 1px solid var(--border);">
                <a href="https://anhkhoa1310.github.io/HuynhAnhKhoa_Blog/posts" class="back-btn" style="background: var(--primary); color: #fff; padding: 15px 35px; border-radius: 12px; font-weight: 700; display: inline-block; box-shadow: 0 10px 20px rgba(79, 70, 229, 0.2);">
                    TIẾP TỤC KHÁM PHÁ CÁC BÀI VIẾT KHÁC
                </a>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-grid">
            <div>
                <h3>ALPHA<span>.</span></h3>
                <p>Kiến tạo giải pháp công nghệ từ sự chỉn chu và tâm huyết.</p>
                <div class="social-bar">
                    <a href="https://github.com/anhkhoa1310" class="social-link"><i class="fab fa-github"></i></a>
                    <a href="https://www.facebook.com/khoa.huynhanh.37853" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="mailto:hhuynhkhanhlinh2@gmail.com" class="social-link"><i class="fas fa-envelope"></i></a>
                </div>
            </div>
            <div>
                <h4 style="margin-bottom: 20px;">KHÁM PHÁ</h4>
                <ul class="footer-links">
                    <li><a href="https://anhkhoa1310.github.io/HuynhAnhKhoa_Blog/">Trang chủ</a></li>
                    <li><a href="https://anhkhoa1310.github.io/HuynhAnhKhoa_Blog/posts">Bài viết</a></li>
                    <li><a href="https://anhkhoa1310.github.io/HuynhAnhKhoa_Blog/about">Giới thiệu</a></li>
                </ul>
            </div>
            <div>
                <h4 style="margin-bottom: 20px;">LIÊN HỆ</h4>
                <ul class="footer-links">
                    <li>Zalo: 0346 204 744</li>
                    <li>Thành phố Hồ Chí Minh</li>
                </ul>
            </div>
        </div>
        <div class="container" style="text-align: center; margin-top: 60px; font-size: 0.75rem; color: var(--text-muted); border-top: 1px solid var(--border); padding-top: 20px; max-width: 1100px;">
            © 2025 HUYNH ANH KHOA.
        </div>
    </footer>
</body>
</html>